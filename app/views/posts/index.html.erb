<div class="container">
		<%= render "create_post" %>
		<br>
		<%= render @posts %>
		<%= will_paginate @posts %>
</div>

<script type="text/javascript">
 //////////////////////////PREVIEW VIDEO//////////////////////////////////
	var _VIDEO = document.querySelector("#main-video");

	document.querySelector("#upload-button").addEventListener('click', function() {
		document.querySelector("#file-to-upload").click();
	});

	// When user chooses a MP4 file
	document.querySelector("#file-to-upload").addEventListener('change', function() {
		console.log(URL);
		// Validate whether MP4
    if(['video/mp4'].indexOf(document.querySelector("#file-to-upload").files[0].type) == -1) {
        alert('Error : Only MP4 format allowed');
        return;
    }

		// Object Url as the video source
		document.querySelector("#main-video source").setAttribute('src', URL.createObjectURL(document.querySelector("#file-to-upload").files[0]));
		
		// Load the video and show it
		$('#video-demo-container').removeClass('d-none');
		$('.image_uploader').val(null);
		$('.nested-fields').addClass('d-none');
		_VIDEO.load();
		_VIDEO.style.display = 'inline';
	});


	document.querySelector("#btn-upload-img").addEventListener('click', function() {
		document.getElementById('file-to-upload').value = '';
		$("#video-demo-container").addClass('d-none');
	});


</script>
