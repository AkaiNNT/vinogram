<div class="show_profile">
  <section class="header">
    <%= simple_form_for @user, url: user_path, method: :put, html: {multipart: true} do |f|%>
    <div class="row">
      <div class="col-md-4 ">
        <div class="avatar_img">
         <%= image_tag (@user.avatar.url),id: 'blah'%>
         <%= f.file_field :avatar, value: 'Edit avatar', id: 'edit_avatar', onchange: "readURL(this);"%>
       </div>
     </div>

     <div class="col-md-8">
      <div class="row">
        <h4 class="name_field"><%= @user.full_name%></h4>
        <% if @user == current_user %> 
          <div class="edit_profile_link">
            <%= link_to 'Edit Profile', edit_user_path(current_user), class: 'button'%>
          </div>
        <% end %>
     </div>
     <div class="row info">
       <ul>
         <li><strong><%=@user.posts.count%></strong> posts</li>
         <li><strong><%= @user.followers.count %></strong> follower</li>
         <li><strong><%= @user.followings.count %></strong> following</li>
       </ul>
     </div>
     <div class="row ">
      <span class="info_description">
       <strong><%= @user.email%></strong>
       <%if @user.description%> 
       : <%= @user.description%>
       <%end%>
     </span>
     </div>
   </div>
 </div>
 <%end%>
</section>
<section class="user_post">
  <hr>
  <div class="title">
    <h7>SHOW ALL POSTS</h7>
  </div>
  <div class="posts row">
    <% @user.posts.order(created_at: :desc).each do |post|%>
      <%= render 'users/posts/post' ,post: post %>
    <% end %>
  </div>


  </section>

</div>
<script type="text/javascript">
  $( "#blah" ).click(function() {
    $( "#edit_avatar" ).click();
  });
  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $('#blah')
        .attr('src', e.target.result)
        .width(150)
        .height(150);
      };

      reader.readAsDataURL(input.files[0]);
    }
  }
</script>